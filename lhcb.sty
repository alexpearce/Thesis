% lhcb.sty
%
% Useful commands when writing documents relating to LHCb.
%
% (c) Alex Pearce <alex@alexpearce.me>
% LPPL LaTeX Public Project License
%
\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{lhcb}[2015/09/24 v1.0 Personal LaTeX Package]

\DeclareOption{italic}{\PassOptionsToPackage{\CurrentOption}{hepnames}}
\ProcessOptions\relax

\RequirePackage{hepnames}
\RequirePackage{siunitx}

% More common speed of light symbol (siunit 2.0 uses c_{0}, gross)
\DeclareSIUnit\clight{\ensuremath{\mathit{c}}}
% Tighter kerning (tuned for Computer Modern, should check whether it's needed 
% for other families)
\DeclareSIUnit\electronvolt{e\kern-0.05em V}
% siunitx does define MeV and friends, but this will use our eV definition
\DeclareSIUnit\MeV{\mega\electronvolt}
% Tighter kerning (again, tuned for Computer Modern)
\DeclareSIUnit\MeVc{\MeV\kern-0.2em\per\kern-0.15em\clight}
\DeclareSIUnit\MeVcc{\MeV\kern-0.2em\per\kern-0.15em\clight\squared}
\DeclareSIUnit\GeV{\giga\electronvolt}
\DeclareSIUnit\GeVc{\GeV\kern-0.2em\per\kern-0.15em\clight}
\DeclareSIUnit\GeVcc{\GeV\kern-0.2em\per\kern-0.15em\clight\squared}
\DeclareSIUnit\TeV{\tera\electronvolt}
\DeclareSIUnit\nb{\nano\barn}
\DeclareSIUnit\pb{\pico\barn}
\DeclareSIUnit\fb{\femto\barn}

%%%%%%%%%%%%%%%%%%%%%%%%
% Decays
% Useful for describing processes of the form A -> B C and there associated
% quantities.
%%%%%%%%%%%%%%%%%%%%%%%%
% Decay
\newcommand*{\decay}[2]{\ensuremath{#1 \to #2}}

% Light hadrons
\newcommand*\phiToKK{\decay{\Pphi}{\PKminus\PKplus}}
% Charm mesons
\newcommand*\cToHc{\decay{\Pcharm}{\PHc}}
\newcommand*\ppToHc{\decay{\pp}{\PHc}}
\newcommand*\ppToccbarX{\decay{\pp}{\ccbar{}X}}
\newcommand*\HcTof{\decay{\PHc}{f}}
\newcommand*\DzToKpi{\decay{\PDzero}{\PKminus\Ppiplus}}
\newcommand*\DzToKpiDCS{\decay{\PDzero}{\PKplus\Ppiminus}}
\newcommand*\DpToKpipi{\decay{\PDplus}{\PKminus\Ppiplus\Ppiplus}}
\newcommand*\DspToKKpi{\decay{\PDsplus}{\PKminus\PKplus\Ppiplus}}
\newcommand*\DspTophipi{\decay{\PDsplus}{\Pphi\Ppiplus}}
\newcommand*\DTohhh{\decay{\PD^{+}_{(\Pstrange)}}{\Phm\Php\Php}}
\newcommand*\DstToDzpi{\decay{\PDstarp}{\PDzero\Ppiplus}}
\newcommand*\JpsiTomumu{\decay{\PJpsi}{\Pmuon\APmuon}}
% Charm baryons
\newcommand*\LcTof{\decay{\PLambdac}{f}}
\newcommand*\LcTophh{\decay{\PLambdac}{\phh}}
\newcommand*\LcTopKK{\decay{\PLambdac}{\pKK}}
\newcommand*\LcToppipi{\decay{\PLambdac}{\ppipi}}
% Beauty mesons
\newcommand*\BsTomumu{\decay{\PBs}{\Pmuon\APmuon}}
\newcommand*\LbToLcmuX{\decay{\PLambdab}{\PLambdac\Pmuon X}}

%%%%%%%%%%%%%%%%%%%%%%%%
% Experiments and detectors
%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*\alice{ALICE}
\newcommand*\atlas{ATLAS}
\newcommand*\cern{CERN}
\newcommand*\cms{CMS}
\newcommand*\lhcb{LHCb}

\newcommand*\hera{HERA}
\newcommand*\hone{H1}
\newcommand*\zeus{ZEUS}
\newcommand*\icecube{IceCube}
\newcommand*\cleo{CLEO}
\newcommand*\babar{BaBar}
\newcommand*\belle{Belle}
\newcommand*\bfactory{\PB factory}
\newcommand*\bfactories{\PB factories}

\newcommand*\prosa{PROSA}
\newcommand*\nnpdf{NNPDF3.0}
\newcommand*\nnpdfl{POWHEG+NNPDF3.0L}
\newcommand*\fonll{FONLL}
\newcommand*\gmvfns{GMVFNS}

\newcommand*\runone {Run 1}
\newcommand*\runtwo {Run 2}
\newcommand*\lsone {Long Shutdown 1}

\newcommand*\betastar {\ensuremath{\beta^{*}}}
\newcommand*\revfreq {\ensuremath{\nu_{\textnormal{rev.}}}}
\newcommand*\lumi {\ensuremath{\mathcal{L}}}
\newcommand*\intlumi{\ensuremath{\lumi_{\textnormal{int.}}}}
\newcommand*\xsec {\ensuremath{\sigma}}
\newcommand*\xsecppvis {\ensuremath{\xsec_{\textnormal{vis.}}}}
\newcommand*\ncollbunches {\ensuremath{N_{\textnormal{Coll.\ bunches}}}}
% Beam energy and momentum
\newcommand*\Ebeam {\ensuremath{E_{\textnormal{Beam}}}}
\newcommand*\pbeam {\ensuremath{\ptot_{\textnormal{Beam}}}}

% LHCb subdetectors
% PID
\newcommand*\velo{VELO}
\newcommand*\ttracker{TT}
\newcommand*\itracker{IT}
\newcommand*\otracker{OT}
\newcommand*\rich{RICH}
\newcommand*\richone{\rich1}
\newcommand*\richtwo{\rich2}
\newcommand*\spd{SPD}

% LHCb triggers
\newcommand*\lzero{L0}
\newcommand*\hlt{HLT}
\newcommand*\hltone{\hlt1}
\newcommand*\hlttwo{\hlt2}
\newcommand*\nobias{\texttt{NOBIAS}}
\newcommand*\tis{TIS}
\newcommand*\tos{TOS}

%%%%%%%%%%%%%%%%%%%%%%%%
% CP violation
%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*\Ctransform{\ensuremath{C}}
\newcommand*\Ptransform{\ensuremath{P}}
\newcommand*\CP{\ensuremath{\Ctransform\!\Ptransform}}
\newcommand*\ACP{\ensuremath{A_{\CP}}}
\newcommand*\ARaw{\ensuremath{\ACP^{\textnormal{Raw}}}}
\newcommand*\ARawBg{\ensuremath{A_{\textnormal{Bkg}}^{\textnormal{Raw}}}}
\newcommand*\dACP{\ensuremath{\Delta\ACP}}

% dACP Background asymmetries
\newcommand*\AP{\ensuremath{A_{P}}}
\newcommand*\AD{\ensuremath{A_{D}}}
\newcommand*\ADf{\ensuremath{A_{D}^{f}}}
\newcommand*\APLb{\ensuremath{\AP^{\PLambdab}}}
\newcommand*\ADmu{\ensuremath{\AD^{\Pmuon}}}

% CKM matrix elements
\newcommand*\Vud{\ensuremath{V_{\Pup\Pdown}}}
\newcommand*\Vcd{\ensuremath{V_{\Pcharm\Pdown}}}
\newcommand*\Vtd{\ensuremath{V_{\Ptop\Pdown}}}
\newcommand*\Vus{\ensuremath{V_{\Pup\Pstrange}}}
\newcommand*\Vcs{\ensuremath{V_{\Pcharm\Pstrange}}}
\newcommand*\Vts{\ensuremath{V_{\Ptop\Pstrange}}}
\newcommand*\Vub{\ensuremath{V_{\Pup\Pbottom}}}
\newcommand*\Vcb{\ensuremath{V_{\Pcharm\Pbottom}}}
\newcommand*\Vtb{\ensuremath{V_{\Ptop\Pbottom}}}

%%%%%%%%%%%%%%%%%%%%%%%%
% Particles
%%%%%%%%%%%%%%%%%%%%%%%%

% Generic 'charm hadron' symbol
\newcommand*\PHc{\ensuremath{H_{\Pcharm}}}
\newcommand*\APHc{\ensuremath{\bar{H}_{\Pcharm}}}
% Generic 'hadron' symbol
\newcommand*\Php{\ensuremath{h^{+}}}
\newcommand*\Phm{\ensuremath{h^{-}}}
% Lambda_c child pairs
\newcommand*\phh{\ensuremath{\Pproton\Phm\Php}}
\newcommand*\php{\ensuremath{\Pproton\Php}}
\newcommand*\phm{\ensuremath{\Pproton\Phm}}
\newcommand*\hmhp{\ensuremath{\Phm\Php}}
\newcommand*\KmKp{\ensuremath{\PKminus\PKplus}}
\newcommand*\pimpip{\ensuremath{\Ppiminus\Ppiplus}}
\newcommand*\pKK{\ensuremath{\Pproton\PKminus\PKplus}}
\newcommand*\ppipi{\ensuremath{\Pproton\Ppiminus\Ppiplus}}
% Soft pion
\newcommand*\Ppiplussoft{\ensuremath{\Ppi^{+}_{\textnormal{Soft}}}}
% D*+
\newcommand*\PDstp{\ensuremath{\PDst{(2010)}^{+}}}
\newcommand*\PDstarp{\ensuremath{\PDstar^{+}}}
% Lambda
\renewcommand*\PLambda{\ensuremath{\Lambda^{0}}}
% Lambda_c
\renewcommand*\PLambdac{\ensuremath{\Lambda_{\Pcharm}^{+}}}
\newcommand*\APLambdac{\ensuremath{\Lambda_{\Pcharm}^{-}}}
% Lambda_b
\renewcommand*\PLambdab{\ensuremath{\Lambda_{\Pbottom}^{0}}}
\newcommand*\APLambdab{\ensuremath{\bar{\Lambda}_{\Pbottom}^{0}}}

\newcommand*\bbbar {\ensuremath{\Pbottom\APbottom}}
\newcommand*\ccbar {\ensuremath{\Pcharm\APcharm}}
\newcommand*\qqbar {\ensuremath{\Pquark\APquark}}
\newcommand*\pp {\ensuremath{\Pproton\Pproton}}
\newcommand*\epem {\ensuremath{\Pelectron\APelectron}}

%%%%%%%%%%%%%%%%%%%%%%%%
% Variables
%%%%%%%%%%%%%%%%%%%%%%%%
% Kinematics
\newcommand*\fvec[1]{\ensuremath{\boldsymbol{#1}}}
\newcommand*\ptot{\ensuremath{p}}
\newcommand*\pT{\ensuremath{p_{\textnormal{T}}}}
\newcommand*\ET{\ensuremath{E_{\textnormal{T}}}}
\newcommand*\rapidity{\ensuremath{y}}
\newcommand*\Eta{\ensuremath{\eta}}
\newcommand*\mass{\ensuremath{m}}
\newcommand*\deltam{\ensuremath{\Delta{m}}}
\newcommand*\lifetime{\ensuremath{\tau}}
\newcommand*\lifetimelab{\ensuremath{\tau'}}
\newcommand*\pTy{\ensuremath{(\pT,\,\rapidity)}}
\newcommand*\bjorkenx{\ensuremath{x}}
\newcommand*\pdfqsquared{\ensuremath{Q^{2}}}

\newcommand*{\ptotrange}[2]{\ensuremath{#1 < \ptot < \SI{#2}{\GeVc}}}
\newcommand*{\pTrange}[2]{\ensuremath{#1 < \pT < \SI{#2}{\GeVc}}}
\newcommand*{\yrange}[2]{\ensuremath{#1 < \rapidity < #2}}
\newcommand*{\pTyrange}[4]{\ensuremath{\pTrange{#1}{#2},\,\yrange{#3}{#4}}}

% Electromagnetic interaction length
\newcommand*\radlen{\ensuremath{X_{0}}}
% Hadron interaction length (or nuclear interaction length)
\newcommand*\hadlen{\ensuremath{\lambda}}
% Cherenkov radiation angle
\newcommand*\cherenkovangle{\ensuremath{\theta_{c}}}

\newcommand*\sqrts{\ensuremath{\sqrt{s}}}
\newcommand*{\sqrtseq}[1]{\ensuremath{\sqrts = \SI{#1}{\TeV}}}
\newcommand*\runtwocom{\SI{13}{\TeV}}

\newcommand*\wisospin{\ensuremath{T_{3}}}

% Track quality
\newcommand*\ip{IP}
\newcommand*\chisq{\ensuremath{\chi^2}}
\newcommand*\ndof{\ensuremath{N_\text{DOF}}}
\newcommand*\ipchisq{\ensuremath{\chisq_{\textnormal{IP}}}}
\newcommand*\lnipchisq{\ensuremath{\ln\ipchisq}}
\newcommand*\logipchisq{\ensuremath{\log\ipchisq}}
\newcommand*\ipchisqndof{\ensuremath{\ipchisq/\mathrm{ndof}}}
\newcommand*\pghost{\ensuremath{p_{\text{Ghost}}}}

% PID
% Cherenkov angle
\newcommand*\thetac{\ensuremath{\theta_{\textnormal{c}}}}
\newcommand*\dll{\ensuremath{\textnormal{DLL}}}
\newcommand*\dllkpi{\ensuremath{\dll_{\PK-\Ppi}}}
\newcommand*\dllpk{\ensuremath{\dll_{\Pproton-\PK}}}
\newcommand*\dllppi{\ensuremath{\dll_{\Pproton-\Ppi}}}
\newcommand*\dllepi{\ensuremath{\dll_{\Pelectron-\Ppi}}}
\newcommand*\dllmupi{\ensuremath{\dll_{\Pmu-\Ppi}}}
\newcommand*\probnn{ProbNN}
\newcommand*\probnnp{\texttt{ProbNNp}}
\newcommand*\probnnk{\texttt{ProbNNk}}
\newcommand*\probnnpi{\texttt{ProbNNpi}}
\newcommand*\nspd{\ensuremath{N_{\textnormal{\spd}}}}
% PID calibration bin
\newcommand*\ptotetanspd{\ensuremath{(\ptot,\,\Eta,\,\nspd)}}

% Efficiencies
\newcommand*\eff{\ensuremath{\varepsilon}}
\newcommand*\effi{\ensuremath{\eff_{i}}}
\newcommand*\effest{\ensuremath{\hat{\eff}}}
\newcommand*\effacc{\ensuremath{\eff_{\textnormal{Acceptance}}}}
\newcommand*\effreco{\ensuremath{\eff_{\textnormal{Reconstruction}}}}
\newcommand*\efftruth{\ensuremath{\rho_{\textnormal{Truth}}}}
\newcommand*\efftracking{\ensuremath{\rho_{\textnormal{Tracking}}}}
\newcommand*\efflzero{\ensuremath{\eff_{\textnormal{\lzero}}}}
\newcommand*\efftrig{\ensuremath{\eff_{\textnormal{Trigger}}}}
\newcommand*\effstrip{\ensuremath{\eff_{\textnormal{Stripping}}}}
\newcommand*\effoffline{\ensuremath{\eff_{\textnormal{Offline}}}}
\newcommand*\effselection{\ensuremath{\eff_{\textnormal{Selection}}}}
\newcommand*\effpid{\ensuremath{\eff_{\textnormal{PID}}}}
\newcommand*\effpidtrack{\ensuremath{\eff_{t}}}
\newcommand*\effpiddecay{\ensuremath{\eff_{d}}}
\newcommand*\effsigwin{\ensuremath{\eff_{\textnormal{Sig. win.}}}}

\newcommand*\bfrac{\ensuremath{\mathcal{B}}}

\newcommand*\prob{\ensuremath{\mathcal{P}}}
\newcommand*\likelihood{\ensuremath{\mathcal{L}}}

\newcommand*\nsig{\ensuremath{N_{\text{Sig.}}}}
\newcommand*\nbkg{\ensuremath{N_{\text{Bkg.}}}}
\newcommand*\neff{\ensuremath{N_{\text{Eff.}}}}
\newcommand*\nsigpm{\ensuremath{N_{\pm,\text{Sig.}}}}
\newcommand*\nbkgpm{\ensuremath{N_{\pm,\text{Bkg.}}}}

\newcommand*\resultratio[2]{\ensuremath{R_{#1/#2}}}
\newcommand*\xsectimesbfrac{\ensuremath{\xsec(\PHc)\times\bfrac(\HcTof)}}

% QCD
\newcommand*\alphas{\ensuremath{\alpha_{s}}}

% Lambda_c phase space
\newcommand*{\msq}[2] {\ensuremath{m^{2}(#1#2)}}
\newcommand*\msqphm{\msq{\Pproton}{\Phm}\xspace}
\newcommand*\msqphp{\msq{\Pproton}{\Php}\xspace}
\newcommand*\msqhh{\msq{\Phm}{\Php}\xspace}
\newcommand*\phatbeam{\ensuremath{\hat{p}_{\textnormal{Beam}}}\xspace}
\newcommand*\phatlbz{\ensuremath{\hat{p}_{\PLambdab}}\xspace}
\newcommand*\phatlcp{\ensuremath{\hat{p}_{\PLambdac}}\xspace}
% Boldface to distinguish it from momentum
\newcommand*\polzlcp{\ensuremath{\hat{\pmb{P}}_{\PLambdac}}\xspace}
\newcommand*\thetap{\ensuremath{\theta_{\Pproton}}\xspace}
\newcommand*\phip{\ensuremath{\phi_{\Pproton}}\xspace}
\newcommand*\phihh{\ensuremath{\phi_{\Phm\Php}}\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%
% Maths
%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*\sPlot{\textit{${}_{s}\mathcal{P}$lot}}
\newcommand*\order{\ensuremath{\mathcal{O}}}
% Absolutes as |x|
\newcommand*{\abs}[1]{\ensuremath{\left\|#1\right\|}}
\newcommand*{\dif}{\mathop{}\!\textnormal{d}}

% Statistics
% Taken from the Uni Bonn thesis template
% https://www.pi.uni-bonn.de/lehre/uni-bonn-thesis
\newcommand*{\unc}{\ensuremath{\delta}}
\newcommand*{\stat}{\ensuremath{\text{stat.}}}
\newcommand*{\syst}{\ensuremath{\text{syst.}}}
\newcommand*{\blue}{\textsc{Blue}}
\newcommand*\valuesep{\,}
% Explicitly set the unit separator, so our manual usage below matches the \SI 
% macro
\sisetup{number-unit-product=\valuesep}
% Formatting uncertainties, optionally with text descriptions
% \numerrt{0.05}{\stat} => "0.05 (stat.)"
\newcommand*\numerrt[3][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{\pm \num{#2}\valuesep\text{(#3)}}%
  \endgroup
}
% \numpmerr{0.06}{0.05} => "^{+0.06}_{-0.05}"
\newcommand*\numpmerr[3][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{^{\num[explicit-sign=+]{#2}}_{\num[explicit-sign=-]{#3}}}%
  \endgroup
}
% \numpmerrt{0.06}{0.05}{\stat} => "^{+0.06}_{-0.05} (stat.)"
\newcommand*\numpmerrt[4][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{^{\num[explicit-sign=+]{#2}}_{\num[explicit-sign=-]{#3}}%
    \valuesep\text{(#4)}}%
  \endgroup
}
% \SIpmerr{3.88}{0.06}{0.05}{\percent} => "(3.88^{+0.06}_{-0.05}) %"
\newcommand*\SIpmerr[5][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}\valuesep\numpmerr{#3}{#4})\valuesep{\si{#5}}}%
  \endgroup
}
% \SIerrt{3.88}{0.05}{\stat}{\percent} => "(3.88 \pm {0.05} (stat.)) %"
\newcommand*\SIerrt[5][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}\valuesep\numerrt{#3}{#4})\valuesep{\si{#5}}}%
  \endgroup
}
% \SIerrtt{3.88}{0.05}{\stat}{0.06}{\syst}{\percent} => "(3.88 \pm {0.05} (stat.) \pm 0.06 (syst.)) %"
\newcommand*\SIerrtt[7][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numerrt{#3}{#4}%
    \valuesep\numerrt{#5}{#6})%
    \valuesep{\si{#7}}}%
  \endgroup
}
% \SIpmerrt{3.88}{0.05}{0.06}{\stat}{\percent} => "(3.88 \pm {}^{+0.05}_{-0.06} (stat.)) %"
\newcommand*\SIpmerrt[6][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numpmerrt{#3}{#4}{#5})%
    \valuesep\si{#6}}%
  \endgroup
}
% \SIpmerrtt{3.88}{0.05}{0.06}{\stat}{0.04}{0.03}{\syst}{\percent} => "(3.88 {}^{+0.05}_{-0.06} (stat.) {}^{+0.04}_{-0.03} (syst.)) %"
\newcommand*\SIpmerrtt[9][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numpmerrt{#3}{#4}{#5}%
    \valuesep\numpmerrt{#6}{#7}{#8})%
    \valuesep\si{#9}}%
  \endgroup
}
% \SIerrs{3.88}{0.05}{0.06}{\percent} => "(3.88 \pm 0.05 (stat.) \pm 0.06} (syst.)) %"
\newcommand*\SIerrs[5][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numerrt{#3}{\stat}%
    \valuesep\numerrt{#4}{\syst})%
    \valuesep\si{#5}}%
  \endgroup
}
% \SIpmerrs{3.88}{0.05}{0.06}{0.04}{0.03}{\percent} => "(3.88 {}^{+0.05}_{-0.06} (stat.) {}^{+0.04}_{-0.03} (syst.)) %"
\newcommand*\SIpmerrs[7][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}
    \valuesep\numpmerrt{#3}{#4}{\stat}
    \valuesep\numpmerrt{#5}{#6}{\syst})%
    \valuesep\si{#7}}%
  \endgroup
}

%%%%%%%%%%%%%%%%%%%%%%%%
% Software
%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*\davinci{\textsc{DaVinci}}
\newcommand*\loki{\textsc{LoKi}}
\newcommand*\minuit{\textsc{MINUIT}}
\newcommand*\hesse{\textsc{HESSE}}
\newcommand*\pythia{\textsc{PYTHIA}}
\newcommand*\evtgen{\textsc{EvtGen}}
\newcommand*\geant{\textsc{Geant}}
\newcommand*\decaytreefitter{\textsc{DecayTreeFitter}}
\newcommand*\rapidsim{\textsc{RapidSim}}
\newcommand*\adaboost{\textsc{AdaBoost}}

\endinput
